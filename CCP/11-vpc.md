가상 사설 

CCP 수준에서는 별로 안중요함


몇가지 개념
VPC, 서브넷, 인터넷게이트웨이, NAT 게이트웨이
보안그룹, NACL, vpc 피어링, vpc 엔드포인트, vpc direct connect
transit gateway

1,2 문제 정도 출제됨
-------------
VPC
VPC는 기본적으로 리전에 개설됨, 여러리전에 생성했으면 VPC는 여러개임
서브넷에 퍼블릭,프라이빗 을 생성할수있고, AZ에 종속적임

인터넷게이트웨이 
VPC 전체 에서 인터넷 연결구

NAT gateway
프라이빗 서브넷에 있는 컴퓨터들이 인터넷 하고싶을때 퍼블릭 서브넷에 있는 게이트웨이(인스턴스임)

-----------------------------

NACL은 네트워크 엑세스 컨트롤
-> 서브넷에서 먼저 받고, EC2에 전달함

보안그룹은 Ec2 자체에 새워진 방화벽임

-> NACL은 서브넷 수준이고, 보안그룹은 Ec2 수준임

보안그룹은 허용만 가능하고
NACL은 허용과 거부를 할 수 있음

보안그룹은 리턴 트래픽이 있어서 stateful하다라고 봄
NACL은 거부당하면 리턴 트래픽이 없어서 stateless라고 함


----------------------------

VPC flow logs

인터페이스를 통과하는 모든 IP 트래픽의 로그
VPC, 서브넷, 엘라스틱 네트워크 인터페이스 등 EC2인스턴스에 들어오고 나가는 모든 트래픽을 확인가능
네트워크에 관련된 문제들을 확인 할 수 있음

로그들은 s3 클라우드 워치 로그로 보낼 수 있음

---------------------------
vpc 피어링
vpc 2개를 연결해서 동일한 네트워크처럼 사용 
이를 위해 CIDR 이 겹치지 않도록 해야됨
겹치면 연결 못함
피어링은 전이적이지 않음      오!!! A - B, A - C 연결했으면,  B - C는 통신 안됨

-------------------------------
VPC 엔드 포인트

프라이빗 서브넷에 존재하는 EC2들이 AWS 서비스를 이용하기 위해 사용
(비공개 연결)
왜 씀?  -> 보안

vpc endpoint gateway는 오직 s3와 다이나모DB전용임
작동 방식 : 서브넷에 VPC 엔드포인트용 게이트웨이를 따로 생성함

vpc endpoint interface는 다 쓸 수 있음
장동 방식 : VPC 엔드포인트용 인테넷카드 (ENI)를 통해 통신함

----------------------
site to site VPN
하이브리드 클라우드 위함, 내 컴퓨터와 VPC 결합
-> 빠르게 연결가능, 공용인터넷을 통해 연결되기 때문에.... 대역폭, 보안 문제가 발생 할 수 도 있음
-> 결국 퍼블릭 인터넷임

다이렉트 커넥트는
위에꺼랑 똑같지만 회사 컴퓨터와 AWS와 전용회선으로 통신함 (사설 네트워크 구축 가능)
-> 기간 오래걸림(한달), 졸 비쌈


stsvpn과 다이렉트 커넥트 문제
-> 첫번째는 사설네트워크인지 이고, 두번째는 빠른 설정이 가능하냐를 물어봄




site to site vpn에는 내회사 IDC에 customer gateway (CGW)가 반드시 필요함
AWS에서는 VGW(virtual private gateway) 가 꼭 필요함
이 두 게이트웨이를 site to site vpn으로 연결 하는 것

--------------------------
transit gateway
허브 및 스포크 형태로, 수천개의 vpc와 온프레미스 시스템간의 피어링을 설정




















