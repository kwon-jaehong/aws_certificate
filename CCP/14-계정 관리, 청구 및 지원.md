AWS organizations

글로벌 서비스

조직을 생성해서 여러 AWS 예정을 관리할 수 있음

주계정은 마스터 계정이라고 부르며, 다른계정은 하위 계정이라고 함

계정을 통합 관리하면, 통합 과금이 되는데 이점은 
- 모든 계정에 대한 비용을 마스터 계정으로 지불하기 때문에.... 한번만 계산하면 됨
- 종합 사용량에 대한 가격 혜택 존재한댕~
- !!!! 예약형 인스턴스 공유가 가능함
- AWS 계정을 API로 생성 할 수 있음 (드롭 박스처럼, 한회사에서 마스터계정을 만들고, 회사원들이 가입해서 쓰는 방식)
- SCP (서비스 컨트롤 폴리시) 서비스 컨트롤 정책으로 , 계정마다 권한을 제한도 할 수 있음

AWS에서는 다중 계정 전략을 수립 할 수 있는데, 부서별, 가격별, 전략별(테스트,개발,프로덕션) 등 계정별 자원을 나누고, 제한하고 관리 가능함

조직을 떠날수도 있음

SCP (콘솔에서 활성화 시켜야됨)
- SCP는 마스터 계정에 영향을 줄수 없음 (마스터에 denyAccess아테나를 해도 적용안됨, 이미 루트에서 풀권한 상속받았으므로)
- 계정 레벨의 IAM이라고 생각하면됨
- scp는 계정에만 적용할 수 있음
- scp는 서비스 역할에는 적용되지 않음
- scp는 작업을 허용하기 위한 명시적 권한이 필요( 진짜 일일이 다 줘야함)
- 마스터 혹은 루트 계정은 FullAWSaccess scp 권한이 있음

사용예:
    프로덕션 계정은 EMR 서비스를 못쓰게 함


scp 트리를 잘 알아야함!!!  (유데미 211강의 6분 11초 내용)

------------------------------------------------------
aws organization 통합 결제

장점
- 결합된 사용량, 만약 S3 다합쳐서 5테라 바이트 넘어가면 요금 할인 들어감 (사용량 많으면 디스카운트 해주는거 이득임)
- 하나의 청구서


--------------------------------
aws control tower


다중 계정 AWS 환경을 쉽게 설정하고 제어할수있게 지원
- 클릭 몇번으로 AWS 다중계정, 그룹을 수동으로 생성 안해도 됨
- 자동적인 정책 설정
- 정책 위반시 탐지해서 알람
- 컨트롤 타워는 organization보다 상위에서 실행됨
- 비용은 무료임

-------------------


클라우드의 모델 가격 책정

4가지 요금 모델이 있음
- 선불 종량제 (낸만큼 사용하는 요금제)
- 예약 할인 (인스턴스 레드쉬)
- 사용량 증가에 따른 할인 (s3는 볼륨이 클수록 할인)
- AWS는 매년 성장하면서 요금을 낮추고 있음

무료 서비스
- IAM
- VPC
- 빌링시스템
- 엘라스틱 빈스텍 (이서비스가 생성하는 자원은 유료)
- 클라우드포메이션 (이서비스가 생성하는 자원은 유료)
- 오토스케일링 그룹 (이서비스가 생성하는 자원은 유료)


EC2
- 기본은 온디멘드고, 초단위 요금 부과
- 로드밸런서는 사용시간, 처리한 데이터량에 요금 부과
- 최소 대금 책정시간은 60초

람다 및 ECS
- 람다는 호출 수, 사용시간, RAM 사용량에 따라 요금 부과
- ECS는 따로 추가 요금은 없고, ec2 요금과 같음
- 파게이트는 CPU와 메모리의 양에 대한 비용 지불(일종의 서버리스 컨테이너이기 때문에)


S3 시리즈
- s3는 객체의 수, 크기에 대해 비용 지불
- s3로 데이터 보내는건 무료


EBS 
- 프로비저닝한 볼륨 유형, 크기에 따라 비용 지불
- EBS에서 외부로 전송하는 데이터 마다 비용 지불
- 단, EBS로 데이터를 보내는것은 무료


RDS
- 시간당 요금 책정!!! (인스턴스와 다름) 엔진 유형, 램 cpu 사이즈에 따라 요금 부과,
-  또한 프로비저닝한 스토리지도 돈듬(월 단위 방식), 데이터 받는것은 무료
- 온디멘드, 예약할인 방식
- 백업시 비용 청구, 하지만 한 리전당 스토리지의 100%까지는 비용청구 X (풀로 한번 백업은 무료)


CDN
- 글로벌 서비스기 떄문에, 보통 대륙별 요금제가 다름
- 특정 에지로케이션에 트래픽이 많으면, 할인 들어감(s3와 같음)
- 외부로 데이터 보낼때는 비용 지불하지만, CDN으로 전송받을때에는 무료임
- HTTP나 s의 요청수에 따라 비용 지불




네트워킹 비용
- vpc에서 ec2로 들어오는(인바운드) 모든 네트워크 트래픽은 무료임
- 동일한 AZ에 두 ec2 통신은 무료
- 다른 AZ에서 퍼블릭 ip를 이용해서 두 ec2가 통신하면, 기가바이트당 0.02달러, 프라이빗 ip를 이용하면 0.01달러
- 다른 리전이면, 에휴... 퍼블릭 ip를 통해 ec2가 통신하므로 기가당 0.02달러







------------------------------------------------
세이빙 플랜
1~3년간 정액제임

3가지 플랜이 있음


EC2 세이빙 플랜
- 하나의 리전에 약정 걸어놓고 약속한 패밀리 내에서 아무거나 쓰면됨 (정액제 돈낸거 한해서)
- 최대 72%

컴퓨트 세이빙 플랜
- 이건 리전 패밀리, 사이즈 , 이런거 상관없이 ec2 파게이트 람다 아무거나 가져다 쓰면됨
- 최대 66%
- 최상의 유연성 제공

-------------------
AWS compute optimizer

글로벌 서비스

내 워크로드에 맞는 최적의 AWS 리소스를 추천해줌
- ec2
- ec2 오토스케일링 그룹
- ebs 볼륨
- 람다 함수

---------------------------------------

pricing calculator - 비용 계산기

비용을 추정할때 쓰는 계산기

연간비용 추정

-----------------------------
billing dashboard

현 사용 비용을 볼 수 있음

프리티어 사용량도 확인 가능

전반적인 비용은 여기서 다봄]

------------------
비용 할당 태그

비용을 자세히 추적하고 그룹화

-------------------
AWS resource groups

태깅을 해서 그룹화 해라!
여기서 리소스를 찾고 한꺼번에 태깅 할 수 있음


-------------------
cost and usage reports - 비용 보고서

사용량 보고서를 작성해서 각 리소스 사용량에 대해 알수있음
시간별로 알 수 있음
상세 보고서임!!!!!

----------------------------
cost explorer - 비용 탐색기

비용 시각화 도구
거시적으로 분석하기 위한 도구
이전사용량을 바탕으로 향후 12개월 비용 예측

비용 탐색기에서 세이빙 플랜 추천도 해줌

------------------------

클라우드 와치에서 요금 알람

비용 지표는 오직 us-east-l 클라우드 와치에서만 메트릭 집계됨 (모든 리전 집계임)

-----------------------------------
AWS budgets (예산)

비용이 예산을 초과할때 경보 보냄

3가지 타입이 있는데

- 사용량에 따른 예산
- 비용에 따른 예산
- 예약에 따른 예산

cost explorer에서도 같은 동작을 할 수 있음


------------------------------------------
Trusted advisor (신뢰할수있는 조언자)


비용,보안 등 걍 조언해줌

무설치 서비스로, AWS 계정 평가 관련 개략적인 정보를 제공
계정을 분석해서 5개의 카테고리에서 추천해줌

5개 카테고리 외워야함
- 비용 최적화
- 성능 최적화
- 보안 최적화
- 내결함성 (라우트53 장애조치, 버킷 로깅, 로드밸런스 최적화 등 서비스 이용시 결함을 체크)
- 서비스 제한 (다이나모 DB 쓰기 용량, cpu 사용량 뭐 이런것들)




베이직 & 개발자 서포트 플랜(7개의 중요검사)
- s3 퍼미션 (접근권한 잘되 있는지)
- 보안그룹 (ssh 나 모든 포트 열려있는지 검사)
- iam을 사용 하고 있는지
- 루트계정의 MFA 사용
- EBS 공용 스냅샷이 있는지 없는지 확인
- RDS 공용 스냅샷 확인
- 서비스 제한 확인


비지니스 & 언터프라이즈 서포트 플랜 (풀 검사)
- 앞서 말한 5개 카테고리 모두 검사
- 클라우드 와치 알람 연동 가능
- 프로그래밍 방식으로 AWS support API에 접근 할 수 있음!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!(중요)




---------------------------------------
AWS 지원 플랜 가격

베이직 : 무룡
개발자 : 29딸러
비지니스 : 100딸라
엔터프라이즈 on-ramp (진입로)
엔터프라이즈 : 15000딸라


베이직
- 24시간 연중 무휴 고객 커뮤니티 지원
- trusted advisor 무료 검사 7개 해줌
- personal helth dashboard 접근 가능

개발자 플랜
- 베이직 있는거 지원받고
- aws 지원 담당자에게 메일보낼수있음
- 일반적인 메일 24시간 안, AWS의 시스템 손상 12시간 안(계정내 IAM 이상한다던지 작동이 안된다라던지)

비지니스 플랜
- 신뢰 조언자 풀 검사 제공
- 24시간 클라우드 `지원 엔지니어`연락 가능
- 추가요금을 내면, 인프라 이벤트 관리 가능
- 개발자 플랜 메일 + 프로덕션 시스템 손상 4시간 안, 프로덕션 시스템 다운 1시간 안으로 응답
- 프로덕션에 대한 지원을 받고싶으면, 최소 비지니스 플랜

엔터프라이즈 진입로 (on-ramp)
- 일단 비지니스 + 
- 기술지원 관리자 technical account managers (TAM) 에 연락 가능
- concierge support team (관리 지원팀) 전담 마크, 요금이나 계정관련해서 추천해줌
- 인프라 이벤트, 프로덕션의 아키텍쳐 / 운영에 대해서도 리뷰 해줌
- 응답 시간은 비지니스 플랜 + 비지니스 크리티컬 시스템 중단 시 30분 이내로 응답


엔터프라이즈
- 이전 꺼 + 이번에는 TAM이 지정됨 캬~
- 비지니스 플랜 + 비지니스 크리티컬 시스템 중단 시 15분 이내로 응답




```
AWS Concierge Support는 AWS의 프리미엄 지원 서비스 중 하나로, AWS Enterprise Support 계약을 가입한 고객을 위해 제공되는 서비스입니다. AWS Concierge Support 팀은 고객의 비즈니스 요구 사항에 따라 맞춤형 지원을 제공하며, 다음과 같은 역할과 지원을 수행합니다:

고객 관계 관리: AWS Concierge Support 팀은 고객과 긴밀한 관계를 유지하며, 고객의 요구 사항과 우선 순위를 이해하고 고객과의 소통을 원활하게 합니다. 이를 통해 고객은 AWS 서비스에 대한 질문이나 문제를 효과적으로 해결할 수 있습니다.

기술적인 지원: AWS Concierge Support 팀은 고객이 AWS 서비스를 올바르게 구성하고 활용할 수 있도록 기술적인 지원을 제공합니다. 이 팀은 AWS 아키텍처, 보안, 성능 최적화, 마이그레이션 등 다양한 주제에 대해 조언하고 지원합니다.

이벤트 및 상황 대응: AWS Concierge Support 팀은 고객의 중요한 이벤트나 장애 상황에 대응하여 문제 해결을 지원합니다. 이를 통해 고객은 장애 복구 및 문제 해결에 대한 신속하고 전문적인 지원을 받을 수 있습니다.

비즈니스 지원: AWS Concierge Support 팀은 비즈니스적인 측면에서 고객을 지원합니다. 예를 들어, 비즈니스 요구 사항에 따라 AWS 서비스를 구성하거나 비용 최적화 방법을 제안하고, AWS의 다양한 서비스 및 리소스에 대한 권장 사항을 제공합니다.

우선적인 접근 및 조정: AWS Concierge Support 팀은 고객의 우선 순위를 고려하여 다른 AWS 팀과의 협력을 조정합니다. 이를 통해 고객은 서비스 제공에 있어 높은 우선순위를 받을 수 있습니다.

AWS Concierge Support 팀은 AWS Enterprise Support 계약을 가입한 고객에게 상호 작용하며, 고객이 AWS 서비스를 최대한 활용하고 성공적으로 구축하도록 돕습니다.
```


```
Technical Account Managers (TAMs)는 AWS의 프리미엄 지원 서비스 중 하나로, AWS Enterprise Support 계약을 가입한 고객을 위해 제공되는 역할입니다. TAM은 고객의 기술적인 관점에서 AWS와의 관계를 관리하며, 다음과 같은 역할과 지원을 수행합니다:

기술적인 전문성: TAM은 AWS 서비스와 기술에 대한 깊은 이해를 가지고 있습니다. 이들은 고객의 비즈니스 요구 사항을 이해하고, AWS의 다양한 서비스와 솔루션을 활용하여 최적의 아키텍처를 설계하고 구축하는 데 도움을 줍니다.

고객 관계 관리: TAM은 고객과 긴밀한 관계를 유지하며, 고객의 요구 사항과 우선 순위를 이해하고 고객과의 소통을 원활하게 합니다. 이를 통해 고객은 AWS 서비스와 관련된 질문이나 문제에 대해 신속하고 전문적인 지원을 받을 수 있습니다.

아키텍처 및 설계 지원: TAM은 고객이 AWS 서비스를 올바르게 아키텍처화하고 최적화하는 데 도움을 줍니다. 이들은 AWS 아키텍처 설계에 대한 조언과 지침을 제공하고, 고객의 환경에서 최상의 성능과 확장성을 달성할 수 있도록 돕습니다.

문제 해결 및 이벤트 대응: TAM은 고객이 AWS 서비스를 사용하면서 발생할 수 있는 문제를 해결하는 데 도움을 줍니다. 장애 복구, 성능 문제 해결, 보안 취약점 조사 등과 같은 이벤트 및 상황에 대한 대응을 지원합니다.

비즈니스 및 비용 최적화: TAM은 고객의 비즈니스 요구 사항과 목표에 맞게 AWS 서비스를 구성하고 최적화하는 데 도움을 줍니다. 비용 최적화를 위한 권장 사항을 제공하고, 비즈니스 성과를 극대화하기 위한 전략적인 조언을 제공합니다.

TAM은 고객의 AWS 경험을 향상시키고 기술적인 지원을 제공하여 고객이 AWS 서비스를 성공적으로 구축하고 운영할 수 있도록 돕는 역할을 수행합니다. 이를 통해 고객은 AWS의 기능과 장점을 최대한 활용하며, 안정적이고 효율적인 클라우드 환경을 구축할 수 있습니다.
```
































