## AWS organizations

- 글로벌 서비스임
- 조직을 생성해서 `여러 AWS 예정을 관리`할 수 있음
- 주계정은 마스터 계정이라고 부르며, 다른 계정은 하위 계정이라고 함
- 조직을 떠날때 조건은, 가입한 AWS 계정이 `독립 실행형`이여야 한다 ( API로 만든 계정 말고, 카드 인증까지 다 끝난 계정, 즉 조직에 탈퇴해도 요금 청구에 아무런 탈이 없는 계정만 마음대로 탈퇴 가능 )
- AWS 계정을 `API로 생성 할 수 있음` (드롭 박스처럼, 한 회사에서 마스터계정을 만들고, 회사원들이 가입해서 쓰는 방식)
- SCP (서비스 컨트롤 폴리시) 서비스 컨트롤 정책으로 , 계정마다 `권한을 제한`도 할 수 있음
- 계정을 통합 관리하면, `통합 과금`이 되는데 이점은 
  - 모든 계정에 대한 비용을 마스터 계정으로 지불하기 때문에.... `한번만 계산`하면 됨
  - 결합된 사용량, 만약 S3 다합쳐서 5테라 바이트 넘어가면 요금 할인 들어감 (`사용량 많으면 디스카운트 해줌`)
  - `예약형 인스턴스 공유`가 가능함


<br>
<br>
<br>


`SCP (콘솔에서 활성화 시켜야됨)`
- SCP는` 마스터 계정에 영향을 줄수 없음` (마스터에 denyAccess아테나를 해도 적용안됨, 이미 루트에서 풀권한 상속받았으므로)
- `계정 레벨의 IAM`이라고 생각하면됨
- scp는 `계정에만 적용`할 수 있음
- scp는 `서비스 역할에는 적용되지 않음`
- scp는 작업을 허용하기 위한 명시적 권한이 필요( 진짜 일일이 다 줘야함)
- 마스터 혹은 루트 계정은 FullAWSaccess scp 권한이 있음

<br>
<br>

![Alt text](../etc/image/scp.png)

<br>
<br>


--------------------------------
## AWS control tower


- 다중 계정 AWS 환경을 쉽게 설정하고 제어할수있게 지원
- 클릭 몇번으로 AWS 다중계정, 그룹을 수동으로 생성 안해도 됨
- 자동적인 정책 설정
- 정책 위반시 탐지해서 알람
- `컨트롤 타워는 organization보다 상위에서 실행됨`
- 비용은 무료임


-------------------
## 클라우드의 모델 가격 책정

<br>

4가지 요금 모델이 있음
- 선불 종량제 (낸만큼 사용하는 요금제)
- 예약 할인
- 사용량 증가에 따른 할인 (s3는 볼륨이 클수록 할인)
- AWS는 매년 성장하면서 요금을 낮추고 있음 -> `규모의 경제`

<br>
<br>

무료 서비스
- IAM
- VPC
- 빌링시스템
- 엘라스틱 빈스텍 (이서비스가 생성하는 자원은 유료)
- 클라우드포메이션 (이서비스가 생성하는 자원은 유료)
- `오토스케일링 그룹` (이서비스가 생성하는 자원은 유료)


<br>
<br>

EC2
- 기본은 온디멘드고, 초단위 요금 부과
- 로드밸런서는 사용시간, 처리한 데이터량에 요금 부과
- 최소 대금 책정시간은 60초


<br>
<br>

람다 및 ECS
- 람다는 호출 수, 사용시간, RAM 사용량에 따라 요금 부과
- ECS는 따로 추가 요금은 없고, ec2 요금과 같음
- 파게이트는 CPU와 메모리의 양에 대한 비용 지불(일종의 서버리스 컨테이너이기 때문에)


<br>
<br>

S3 시리즈
- s3는 객체의 수, 크기에 대해 비용 지불
- s3로 데이터 보내는건 무료


<br>
<br>


EBS 
- 프로비저닝한 볼륨 유형, 크기에 따라 비용 지불
- EBS에서 외부로 전송하는 데이터 마다 비용 지불
- 단, `EBS로 데이터를 보내는것은 무료`


<br>
<br>

RDS
- 시간당 요금 책정!!! (인스턴스와 다름) 엔진 유형, 램 cpu 사이즈에 따라 요금 부과,
-  또한 프로비저닝한 스토리지도 돈듬(월 단위 방식), 데이터 받는것은 무료
- 온디멘드, `예약할인` 방식
- 백업시 비용 청구, 하지만 한 리전당 스토리지의 100%까지는 비용청구 X (풀로 한번 백업은 무료)


<br>
<br>

CDN
- 글로벌 서비스기 떄문에, 보통 대륙별 요금제가 다름
- 특정 에지 로케이션에 `트래픽이 많으면, 할인 들어감(s3와 같음)`
- 외부로 데이터 보낼때는 비용 지불하지만,` CDN으로 전송받을때에는 무료임`
- HTTP나 s의 요청수에 따라 비용 지불



<br>
<br>


네트워킹 비용
- vpc에서 ec2로 들어오는(인바운드) 모든 네트워크 트래픽은 무료임
- 동일한 AZ에 두 ec2 통신은 무료
- 다른 AZ에서 퍼블릭 ip를 이용해서 두 ec2가 통신하면, 기가바이트당 0.02달러, 프라이빗 ip를 이용하면 0.01달러
- 다른 리전이면, 에휴... 퍼블릭 ip를 통해 ec2가 통신하므로 기가당 0.02달러




<br>
<br>



------------------------------------------------
## AWS Savings Plan - 세이빙 플랜

- 기본 1~3년간 정액제임
- CLF 레벨에서는 2가지만 알면됨
  - `EC2 세이빙` 플랜
    - 하나의 `리전`에 약정 걸어놓고 약속한 패밀리 내에서 아무거나 쓰면됨 (정액제 돈낸거 한해서)
    - 최대 72%

  - `compute` 세이빙 플랜
    - 이건 리전 패밀리, 사이즈 , 이런거 `상관없이` ec2 파게이트 람다 아무거나 가져다 쓰면됨
    - 최대 66%
    - `최상의 유연성 제공`

<br>
<br>

-------------------
## AWS compute optimizer

- AWS 컴퓨팅 리소스의 현재 구성과 지난 `14`일 동안에 대한 Amazon CloudWatch의 사용률 지표를 분석
- `글로벌 서비스`
- `내 워크로드에 맞는 최적의 AWS 리소스를 추천해줌`
  - ec2
  - ec2 오토스케일링 그룹
  - ebs 볼륨
  - 람다 함수

<br>
<br>

---------------------------------------
## AWS pricing calculator - 비용 계산기

- 비용을 추정할때 쓰는 계산기
- 내가 쓸 자원들 1년, ec2 이런거 적으면 대략적인 연간비용 추정

<br>
<br>

-----------------------------
## AWS billing dashboard

- 현 계정에서 청구비용을 볼 수 있음
- 프리티어 사용량도 확인 가능
- `전반적인 비용은 여기서 다봄`

<br>
<br>

------------------
## AWS resource groups


- AWS 리소스에 대해 태깅에 관해 `편리하게` 작업 할 수 있음
- 비용 할당 태그 - `비용을 자세히 추적하고 그룹화`

<br>
<br>

------------------------------

## AWS Cost allocation tags - aws 비용 할당 태그

-  AWS는 두 가지 유형의 비용 할당 태그인 `AWS 생성 태그` 와 `사용자 정의 태그`를 제공합니다
- 각 리소스에 대해 `각 태그 키는 고유`해야 하며 `각 태그 키는 하나의 값`만 가질 수 있습니다. -> 그러니까 temp라는 키에 하나의 값만 있음
- 비용 탐색기 또는 비용 할당 보고서에 표시되려면` AWS 생성 태그와 사용자 정의 태그를 별도로 활성화`해야 합니다.


-------------------
## AWS cost and usage reports - 비용 보고서 (상세 보고서)

- 사용량 보고서를 작성해서 각 리소스 사용량에 대해 알수있음
- 시간별로 알 수 있음
- 청구 비용에 관한 `상세 보고서`임

<br>
<br>

----------------------------
## AWS cost explorer - 비용 탐색기

- 비용 시각화 도구
- 거시적으로 분석하기 위한 도구
- 이전 사용량을 바탕으로 `향후 12개월 비용 예측`
- 비용 탐색기에서 `세이빙 플랜 추천도` 해줌

<br>
<br>

-----------------------------------
## AWS budgets (예산)

- 비용이 예산을 초과할때 경보 보냄
- 3가지 타입이 있는데
  - `사용량`에 따른 예산 - 리소스,리소스 그룹의 사용량 기준
  - `비용`에 따른 예산 - 지정된 돈
  - `예약`에 따른 예산 - 특정 예약 인스턴스 또는 예약 용량의 비용을 모니터링하고 예산 제한
- AWS cost explorer에서도 같은 동작을 할 수 있음

<br>
<br>

------------------------------------------
## AWS Trusted advisor (신뢰할수있는 조언자)

- AWS `모범 사례를 따르는 데 도움이 되는 권장 사항을 제공`합니다
- AWS의 비용최적화,보안,성능,내결함성,서비스 한도에 대해 조언해줌
- 무설치 서비스로, AWS 계정 평가 관련 개략적인 정보를 제공
계정을 분석해서 5개의 카테고리에서 추천해줌

<br>
<br>

`5개 카테고리 외워야함`
- 비용 최적화
- 성능 최적화
- 보안 최적화
- 내결함성 (라우트53 장애조치, 버킷 로깅, 로드밸런스 최적화 등 서비스 이용시 결함을 체크)
- 서비스 제한 (다이나모 DB 쓰기 용량, cpu 사용량 뭐 이런것들)


<br>
<br>

베이직 & 개발자 서포트 플랜(`7개의 중요검사`)
- s3 퍼미션 (접근권한 잘되 있는지)
- 보안그룹 (ssh 나 모든 포트 열려있는지 검사)
- iam을 사용 하고 있는지
- 루트계정의 MFA 사용
- EBS 공용 스냅샷이 있는지 없는지 확인
- RDS 공용 스냅샷 확인
- 서비스 제한 확인

<br>
<br>

비지니스 & 언터프라이즈  서포트 플랜 (풀 검사)
- 앞서 말한 Trusted advisor 5개 카테고리 모두 검사
- 클라우드 와치 알람 연동 가능
- `프로그래밍 방식으로 AWS support API에 접근 할 수 있음!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!(중요)`




---------------------------------------
## AWS 지원 플랜

<br>
<br>


베이직
- 24시간 연중 무휴 `고객 커뮤니티` 지원 (`AWS 지원받는거 아님`)
- trusted advisor 무료 검사 7개 해줌
- personal helth dashboard 접근 가능

<br>
<br>

개발자 플랜
- 베이직 있는거 지원+
- aws 지원 담당자에게 메일보낼수있음
- 일반적인 메일 24시간 안, AWS의 시스템 손상 12시간 안(`1차 담당자`) 

<br>
<br>

비지니스 플랜
- AWS Trusted Advisor 풀 검사 제공
- 추가 요금을 내면, `인프라 이벤트 관리(IEM)` 가능
- 개발자 플랜 메일 + 프로덕션 시스템 손상 4시간 안, 프로덕션 시스템 다운 1시간 안으로 응답
- 프로덕션에 대한 지원을 받고싶으면, 최소 비지니스 플랜

<br>
<br>

엔터프라이즈 진입로 (on-ramp)
- 일단 비지니스 + 
- 기술지원 관리자 technical account managers (TAM) 에 `연락만 가능`
- concierge support team (관리 지원팀) 전담 마크, 요금이나 계정관련해서 추천해줌
- 응답 시간은 비지니스 플랜 + 비지니스 크리티컬 시스템 중단 시 30분 이내로 응답

<br>
<br>

엔터프라이즈
- 이전 꺼 + 이번에는 TAM이 지정됨 캬~
- 비지니스 플랜 + 비지니스 크리티컬 시스템 중단 시 15분 이내로 응답


<br>
<br>

![Alt text](../etc/image/%EC%84%9C%ED%8F%AC%ED%8A%B8%20%ED%94%8C%EB%9E%9C.jpg)

<br>
<br>

||Basic|Developer|Business|Enterprise On-Ramp|Enterprise|
|------|---|---|---|---|---|
|AWS Trusted Advisor 모범 사례 확인|Service Quota 및 기본 보안 확인|Service Quota 및 기본 보안 확인|전체 세트의 확인|전체 세트의 확인|전체 세트의 확인|
|향상된 기술 지원||클라우드 지원 담당자에게 업무 시간**에 웹을 통해 액세스`(24시간 아님)`<br><br>`1차 담당자`를 통한 무제한의 사례 지원<br>|클라우드 지원 엔지니어에게 연중무휴 24시간 전화, 웹 및 채팅 액세스<br><br>사례 수 무제한 및 연락처 수 무제한(IAM 지원)|클라우드 지원 엔지니어에게 연중무휴 24시간 전화, 웹 및 채팅 액세스<br><br>사례 수 무제한 및 연락처 수 무제한(IAM 지원)|클라우드 지원 엔지니어에게 연중무휴 24시간 전화, 웹 및 채팅 액세스<br><br>사례 수 무제한 및 연락처 수 무제한(IAM 지원)|
|프로그래밍 방식 사례 관리|||AWS Support API|AWS Support API|AWS Support API|
|사례 심각도/응답 시간*||일반 지침: < 24시간**<br><br>시스템 손상: < 12시간**|일반 지침: < 24시간<br><br>시스템 손상: < 12시간<br><br>프로덕션 시스템 손상: < 4시간<br><br>프로덕션 시스템 중단: < 1시간|일반 지침: < 24시간<br><br>시스템 손상: < 12시간<br><br>프로덕션 시스템 손상: < 4시간<br><br>프로덕션 시스템 중단: < 1시간<br><br>비즈니스 크리티컬 시스템 중단: < 30분|일반 지침: < 24시간<br><br>시스템 손상: < 12시간<br><br>프로덕션 시스템 손상: < 4시간<br><br>프로덕션 시스템 중단: < 1시간<br><br>비즈니스/미션 크리티컬 시스템 중단: < 15분|
|타사 소프트웨어 지원|||상호 운용성 및 구성 지침과 문제 해결|상호 운용성 및 구성 지침과 문제 해결|상호 운용성 및 구성 지침과 문제 해결|
|인프라 이벤트 관리(IEM)|||추가요금 지불시 이용가능|제공|제공|
|TAM (기술팀) 지원||||연락만 가능|전담팀 붙음|
|컨시어지 지원||||지원|지원|
|자습형 실습이 포함된 `온라인 교육 지원`|||||지원|

<br><br>


- 일반 지침: < 24시간
  - 예시: AWS 서비스 사용에 관한 `일반적인 문의 또는 기능에 대한 도움말`을 요청하는 경우, AWS 서포트 팀이 해당 문의에 대한 응답을 24시간 이내에 제공합니다.

- 시스템 손상: < 12시간
  - 예시: 특정 AWS 리소스 또는 서비스의 문제로 인해 애플리케이션 또는 시스템이 제대로 작동하지 않는 경우, -> `Ec2 시스템 작동 불가`

- 프로덕션 시스템 손상: < 4시간
  - 예시: `회사 서비스가 Ec2로 구성 되어있고, Ec2서비스가 손상된 경우`

- 프로덕션 시스템 중단: < 1시간
  - 예시: `회사 서비스가 Ec2로 구성 되어있고, Ec2서비스가 중단된 경우`

- 비즈니스 크리티컬 시스템 중단: < 30분
  - 예시: 비즈니스의 중요한 기능이나 서비스에 치명적인 영향을 미치는 상황이 발생하여 긴급한 해결이 필요한 경우, AWS 서포트 팀이 해당 문제에 대한 응답을 30분 이내에 제공하여 신속하고 즉각적인 대응을 지원합니다.

<br><br><br><br>

`AWS Concierge Support` <br>
엔터프라이즈 계정 작업을 전문으로 하는` AWS 청구 및 계정 전문가`입니다. 귀하의 청구 및 계정 문의에 대해 신속하고 효율적으로 도움을 드릴 것입니다. 

<br>
<br>

`Technical Account Managers (TAMs)` <br>
TAM은 고객의 기술적인 관점에서 AWS와의 관계를 관리하며, 다음과 같은 역할과 지원을 수행합니다

<br>

- 고객이 AWS 서비스를 올바르게 아키텍처화하고 최적화하는 데 도움을 줍니다.
- 최적의 `아키텍처를 설계하고 구축`하는 데 도움을 줍니다.
- 장애 복구, 성능 문제 해결, 보안 취약점 조사 등과 같은 이벤트 및 상황에 대한 대응을 지원합니다.
- 비용 최적화를 위한 권장 사항을 제공하고, 비즈니스 성과를 극대화하기 위한 전략적인 조언을 제공합니다.




<br>
<br>
<br>



























