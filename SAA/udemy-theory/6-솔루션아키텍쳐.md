## 솔루션 아키텍쳐

- 이때까지, 개별적인 기술만 배웠음, 이제는 이걸가지고 활용하는 방법에 대해 토론함
- 이섹션 내용을 `100% 알고 있어야함`





------------------------

## stateless web app : whattls the time.com

구성하려고 하는 앱
- ` whattls the time.com`은 사람들에게 시간을 알려주는 웹 앱임
- 너무 간단해, `DB는 필요 없음`
- ELB는 `IP가 지속적으로 바뀜` -> DNS는 고정인데, ip는 변함


stateless 앱
- 서버가 '`클라이언트의 정보`'를 저장 할 필요 없는 앱


------------------------------

## stateful web app : myclothes.com


구성하려고 하는 앱
- 온라인으로 옷을 살수 있게 해주고, 장바구니 기능 있는 웹사이트
- 동시에 수백명의 사용자가 있음
- 사람들이 사이트 구경하다가 `장바구니 항목 리셋이 되지 않기를 원함` 
- 즉, DB 필요
- 한사람 기준으로, 다른 항목을 클릭할때마다, `같은 인스턴스의 백엔드가` 아님
  - 적용할 수 있는 방법들
    - ELB stckiness (고정화 활성)
      - 최악의 경우, 트래픽이 한쪽으로 쏠림
      - 사이트 종료(세션 종료) 후, 다른 인스턴스 사이트 접속하면 장바구니 날ㄹ라감
    - 사용자 쿠키 활성
      - `클라이언트`에서 장바구니 내용을 저장 (이건 `웹 쿠키` 상에서 일어남)
      - 하지만, `http 요청이 무거워짐` -> 장바구니에 추가할수록, 웹쿠키 데이터가 늘어남
      - 보안에 취약 -> 이 아키텍쳐를 사용하려면, `인스턴스가 반드시 사용자 쿠키의 내용을 검증` 해야됨
      - 참고로 쿠키의 최대용량은 `4KB`임
    - 서버세션 사용
      - 엘라스틱 캐시`(DB)에` 사용자 장바구니 `물품을 저장`
    - DB 사용
      - 캐시 + DB 저장 패턴
      - 클라이언트 티어, 웹 티어, 데이터베이스 티어, `3티어 아키텍쳐`라고 부름

--------------------------------------------

## stateful web app : mywordpress.com

- 구성하려고 하는 앱
- 고가용성 워드프래스, 이미지 저장
- EFS 써라!

--------------------------------
## 빠른 애플리케이션 셋팅

Ec2 인스턴스 경우
- `golden AMI` 사용
  - 골든 이미지는 OS 영역을 포함해 필수 패키지가 설치된 일종의 `표준 이미지` 개념입니다.
  - 커스텀 AMI 만들란 말.
- 유저 DATA 스크립트 작성
- 골든이미지, 유저 데이타 두개 다 써! -> `하이브리드`(beanstalk)


EBS & RDS 경우
- 스냅샷 복원



-------------------------------------------

## AWS Elastic Beanstalk

- 용량 프로비저닝, 로브밸런서, 오토스케일링, 헬스체크, 인스턴스 구성 등을 `beanstalk에서 관리해줌`
- 개발자로서 코드만 관리하면 됨
- 각 구성 요소를 완전 제어 가능하고, 하나의 인터페이스에서 관리 가능
- `다양한 환경(dev,test,prod...)`를 구성 할 수 있음
- `Docker 컨테이너 배포 지원됨`

beanstalk에서도 구성 티어가 존재
웹서버 티어
- 걍 다이렉트로 애플리케이션 접근

워커 티어
- MSA처럼 메신져를 통해서 애플리케이션 접근




































